{"version":3,"sources":["webpack:///E:/develop/小程序/cozyben-weapp/components/image-upload.vue?d1f2","webpack:///E:/develop/小程序/cozyben-weapp/components/image-upload.vue?a222","webpack:///E:/develop/小程序/cozyben-weapp/components/image-upload.vue?1288","webpack:///E:/develop/小程序/cozyben-weapp/components/image-upload.vue?3ef2","webpack:///E:/develop/小程序/cozyben-weapp/components/image-upload.vue","webpack:///E:/develop/小程序/cozyben-weapp/components/image-upload.vue?1f36","webpack:///E:/develop/小程序/cozyben-weapp/components/image-upload.vue?b3a6"],"names":["name","props","data","serverUrl","serverUrlDeleteImage","imageBasePos","x0","y0","w","h","showMoveImage","moveImagePath","moveLeft","moveTop","deltaLeft","deltaTop","dragIndex","targetImageIndex","imageList","isDestroyed","mounted","value","destroyed","computed","imageListData","posMoveImageLeft","posMoveImageTop","isShowDel","enableDel","isShowAdd","enableAdd","limit","length","isDragable","enableDrag","methods","selectImage","Promise","resolve","reject","uni","chooseImage","count","success","res","filePath","tempFilePaths","availableImageNumber","showToast","title","icon","mask","duration","options","fail","Error","then","showLoading","remoteIndexStart","promiseWorkList","map","item","uniCloud","uploadFile","all","console","log","hideLoading","forEach","push","fileID","$emit","currentImages","allImages","catch","err","message","showModal","content","showCancel","deleteImage","e","imageIndex","currentTarget","dataset","index","deletedImagePath","splice","request","url","method","imagePath","currentImage","previewImage","current","indicator","loop","urls","initImageBasePos","paddingRate","_self","getSystemInfo","obj","screenWidth","leftPadding","Math","ceil","imageWidth","findOverlapImage","posX","posY","rows","floor","cols","indx","isDragging","start","basePosY","currentImageOffsetTop","offsetTop","target","offsetLeft","move","touch","touches","clientX","clientY","stop"],"mappings":"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","file":"components/image-upload.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./image-upload.vue?vue&type=template&id=ae378aee&\"\nvar renderjs\nimport script from \"./image-upload.vue?vue&type=script&lang=js&\"\nexport * from \"./image-upload.vue?vue&type=script&lang=js&\"\nimport style0 from \"./image-upload.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"E:/develop/小程序/cozyben-weapp/components/image-upload.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./image-upload.vue?vue&type=template&id=ae378aee&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.imageListData, function(path, index) {\n    var m0 = _vm.isDragging(index)\n    return {\n      $orig: _vm.__get_orig(path),\n      m0: m0\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./image-upload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./image-upload.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tname:'image-upload',\n\t\n\tprops: ['value','enableDel','enableAdd','enableDrag','formData','header', 'limit','fileKeyName'],\n\t\n\tdata() {\n\t\treturn {\n\t\t\tserverUrl:'',\n\t\t\tserverUrlDeleteImage:'',\n\t\t\timageBasePos:{\n\t\t\t\tx0: -1,\n\t\t\t\ty0: -1,\n\t\t\t\tw:-1,\n\t\t\t\th:-1,\n\t\t\t},\n\t\t\tshowMoveImage: false,\n\t\t\tmoveImagePath: '',\n\t\t\tmoveLeft: 0,\n\t\t\tmoveTop: 0,\n\t\t\tdeltaLeft: 0,\n\t\t\tdeltaTop: 0,\n\t\t\tdragIndex: null,\n\t\t\ttargetImageIndex: null,\n\t\t\timageList: [],\n\t\t\tisDestroyed: false\n\t\t};\n\t},\n\t\n\tmounted: function(){\n\t\tthis.imageList = this.value\n\t},\n\t\t\t\n\tdestroyed: function(){\n\t\tthis.isDestroyed = true\n\t},\n\t\n\tcomputed:{\n\t\timageListData: function(){\n\t\t\tif(this.value){\n\t\t\t\treturn this.value\n\t\t\t}\n\t\t},\n\t\tposMoveImageLeft: function(){ \n\t\t\treturn this.moveLeft + 'px'\n\t\t},\n\t\tposMoveImageTop: function(){\n\t\t\treturn this.moveTop + 'px'\n\t\t},\n\t\tisShowDel: function(){\n\t\t\tif(this.enableDel === false){\n\t\t\t\treturn false\n\t\t\t}else{\n\t\t\t\treturn true\n\t\t\t}\n\t\t},\n\t\tisShowAdd: function(){\n\t\t\tif(this.enableAdd === false){\n\t\t\t\treturn false\n\t\t\t}\n\t\t\t\n\t\t\tif(this.limit && this.imageList.length >= this.limit){\n\t\t\t\treturn false\n\t\t\t}\n\t\t\t\n\t\t\treturn true\n\t\t},\n\t\tisDragable: function(){\n\t\t\tif(this.enableDrag === false){\n\t\t\t\treturn false\n\t\t\t}else{\n\t\t\t\treturn true\n\t\t\t}\n\t\t}\n\t},\n\t\n\tmethods:{\n\t\tselectImage(){\n\t\t\tif(!this.imageList){\n\t\t\t\tthis.imageList = []\n\t\t\t}\n\t\t\t\n\t\t\tnew Promise((resolve, reject) => {\n\t\t\t  uni.chooseImage({\n\t\t\t    count: this.limit ? (this.limit - this.imageList.length) : 999,\n\t\t\t    success: res => {\n\t\t\t\t\tconst filePath = res.tempFilePaths;\n\t\t\t\t\t//如果设置了limit限制，在web上count参数无效，这里做判断控制选择的数量是否合要求\n\t\t\t\t\t//在非微信小程序里，虽然可以选多张，但选择的结果会被截掉\n\t\t\t\t\t//在app里，会自动做选择数量的限制\n\t\t\t\t\tif(this.limit){\n\t\t\t\t\t\tconst availableImageNumber = this.limit - this.imageList.length\n\t\t\t\t\t\tif(availableImageNumber < filePath.length){\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '图片总数限制为'+this.limit+'张，当前还可以选'+availableImageNumber+'张',\n\t\t\t\t\t\t\t\ticon:'none',\n\t\t\t\t\t\t\t\tmask: false,\n\t\t\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tconst options = { filePath }\n\t\t\t\t\t\n\t\t\t\t\tresolve(options)\n\t\t\t    },\n\t\t\t    fail: () => {\n\t\t\t\t\treject(new Error('Fail_Cancel'))\n\t\t\t    }\n\t\t\t  })\n\t\t\t}).then(async (options) => {\n\t\t\t\tuni.showLoading({ title: '文件上传中...' });\n\t\t\t\tconst { filePath } = options;\n\t\t\t\tconst remoteIndexStart = this.imageList.length - filePath.length;\n\t\t\t\tlet promiseWorkList = filePath.map(item=>{\n\t\t\t\t  return uniCloud.uploadFile({ filePath: item });\n\t\t\t\t});\n\t\t\t\tPromise.all(promiseWorkList).then(res => {\n\t\t\t\t\tconsole.log(res,'Promise')\n\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\tif(this.isDestroyed){\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tres.forEach(item=>{\n\t\t\t\t\t\tthis.imageList.push(item.fileID)\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.$emit('add', {\n\t\t\t\t\t\tcurrentImages: filePath,\n\t\t\t\t\t\tallImages: this.imageList\n\t\t\t\t\t})\n\t\t\t\t\t\n\t\t\t\t\tthis.$emit('input', this.imageList)\n\t\t\t\t}).catch(err=>{\n\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\tconsole.log(err);\n\t\t\t\t\tif (err.message !== 'Fail_Cancel') {\n\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t  content: `图片上传失败，错误信息为：${err.message}`,\n\t\t\t\t\t\t  showCancel: false\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t})\n\t\t},\n\t\t\n\t\tdeleteImage: function(e){\n\t\t\tvar imageIndex = e.currentTarget.dataset.index\n\t\t\tvar deletedImagePath = this.imageList[imageIndex]\n\t\t\tthis.imageList.splice(imageIndex, 1) \n\t\t\t\n\t\t\t//检查删除图片的服务器地址是否设置，如果设置则调用API，在服务器端删除该图片\n\t\t\tif(this.serverUrlDeleteImage){\n\t\t\t\tuni.request({\n\t\t\t\t\turl: this.serverUrlDeleteImage,\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\timagePath: deletedImagePath\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\tconsole.log(res.data)\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tthis.$emit('delete',{\n\t\t\t\tcurrentImage: deletedImagePath,\n\t\t\t\tallImages: this.imageList\n\t\t\t})\n\t\t\tthis.$emit('input', this.imageList)\n\t\t},\n\t\t\n\t\tpreviewImage: function(e){\n\t\t\tvar imageIndex = e.currentTarget.dataset.index\n\t\t\tuni.previewImage({\n\t\t\t\tcurrent: this.imageList[imageIndex],\n\t\t\t\tindicator: \"number\",\n\t\t\t\tloop: \"true\",\n\t\t\t\turls:this.imageList\n\t\t\t})\n\t\t},\n\t\t\n\t\tinitImageBasePos: function(){\n\t\t\tlet paddingRate = 0.024\n\t\t\tvar _self = this\n\t\t\t//计算图片基准位置\n\t\t\tuni.getSystemInfo({\n\t\t\t\tsuccess: function(obj) {\n\t\t\t\t\tlet screenWidth = obj.screenWidth\n\t\t\t\t\tlet leftPadding = Math.ceil(paddingRate * screenWidth)\n\t\t\t\t\tlet imageWidth = Math.ceil((screenWidth - 2*leftPadding)/4)\n\t\t\t\t\t\n\t\t\t\t\t_self.imageBasePos.x0 = leftPadding\n\t\t\t\t\t_self.imageBasePos.w = imageWidth\n\t\t\t\t\t_self.imageBasePos.h = imageWidth\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t\n\t\tfindOverlapImage: function(posX, posY){\n\t\t\tlet rows = Math.floor((posX-this.imageBasePos.x0)/this.imageBasePos.w)\n\t\t\tlet cols = Math.floor((posY-this.imageBasePos.y0)/this.imageBasePos.h)\n\t\t\tlet indx = cols*4 + rows\n\t\t\treturn indx\n\t\t},\n\t\t\n\t\tisDragging: function(indx){\n\t\t\treturn this.dragIndex === indx\n\t\t},\n\t\t\n\t\tstart: function(e){\n\t\t\tconsole.log(this.isDragable)\n\t\t\tif(!this.isDragable){\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.dragIndex = e.currentTarget.dataset.index\n\t\t\tthis.moveImagePath = this.imageList[this.dragIndex]\n\t\t\tthis.showMoveImage = true\n\t\t\t\n\t\t\t//计算纵向图片基准位置\n\t\t\tif(this.imageBasePos.y0 === -1){\n\t\t\t\tthis.initImageBasePos()\n\t\t\t\t\n\t\t\t\tlet basePosY = Math.floor(this.dragIndex / 4) * this.imageBasePos.h\n\t\t\t\tlet currentImageOffsetTop = e.currentTarget.offsetTop\n\t\t\t\tthis.imageBasePos.y0 = currentImageOffsetTop - basePosY\n\t\t\t}\n\t\t\t\n\t\t\t//设置选中图片当前左上角的坐标\n\t\t\tthis.moveLeft = e.target.offsetLeft\n\t\t\tthis.moveTop = e.target.offsetTop\n\t\t},\n\t\t\n\t\tmove: function(e){\n\t\t\tif(!this.isDragable){\n\t\t\t\treturn\n\t\t\t}\n\t\t\tconst touch = e.touches[0]\n\t\t\tthis.targetImageIndex = this.findOverlapImage(touch.clientX, touch.clientY)\n\t\t\t\n\t\t\t//初始化deltaLeft/deltaTop\n\t\t\tif(this.deltaLeft === 0){\n\t\t\t\tthis.deltaLeft = touch.clientX - this.moveLeft\n\t\t\t\tthis.deltaTop = touch.clientY - this.moveTop \n\t\t\t}\n\t\t\t\n\t\t\t//设置移动图片位置\n\t\t\tthis.moveLeft = touch.clientX - this.deltaLeft\n\t\t\tthis.moveTop = touch.clientY - this.deltaTop\n\t\t},\n\t\t\n\t\tstop: function(e){\n\t\t\tif(!this.isDragable){\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif(this.dragIndex !== null && this.targetImageIndex !== null){\n\t\t\t\tif(this.targetImageIndex<0){\n\t\t\t\t\tthis.targetImageIndex = 0\n\t\t\t\t}\n\t\t\t\n\t\t\t\tif(this.targetImageIndex>=this.imageList.length){\n\t\t\t\t\tthis.targetImageIndex = this.imageList.length-1\n\t\t\t\t}\n\t\t\t\t//交换图片\n\t\t\t\tif(this.dragIndex !== this.targetImageIndex){\n\t\t\t\t\tthis.imageList[this.dragIndex] = this.imageList[this.targetImageIndex]\n\t\t\t\t\tthis.imageList[this.targetImageIndex] = this.moveImagePath\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis.dragIndex = null\n\t\t\tthis.targetImageIndex = null\n\t\t\tthis.deltaLeft = 0\n\t\t\tthis.deltaTop = 0\n\t\t\tthis.showMoveImage = false\n\t\t\t\n\t\t\tthis.$emit('input', this.imageList)\n\t\t}\n\t}\n}\n","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./image-upload.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./image-upload.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1585731662470\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}